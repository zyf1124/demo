<script setup lang="ts">
import { useRouter } from "vue-router"
import { Html5Qrcode } from "html5-qrcode"
import { showToast } from 'vant'
let router = useRouter();
let svg_arrows: string = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="master_svg0_50_641"><rect x="0" y="16" width="16" height="16" rx="0"/></clipPath></defs><g transform="matrix(0,-1,1,0,-16,16)" clip-path="url(#master_svg0_50_641)"><g><path d="M7.64509,26.62912L7.99738,27L12.85517,21.894687C13.0483,21.689716,13.0483,21.359477,12.85517,21.154506C12.66108,20.9489933,12.34497,20.9487584,12.1506,21.153982L7.99838,25.51754L3.849649,21.153982C3.655584,20.9486726,3.339636,20.9486726,3.145571,21.153982C2.9518656,21.358727000000002,2.9514207,21.689367,3.144574,21.894687L7.62566,26.60765L7.64559,26.62912L7.64509,26.62912Z" fill="#999999" fill-opacity="1"/></g></g></svg>`;
interface obj {
    name: string,
    svg: string,
    flag: number,
}
let dataList: Array<obj> = [{
    name: '个人信息',
    flag: 1,
    svg: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="master_svg0_50_628"><rect x="0" y="0" width="16" height="16" rx="0"/></clipPath></defs><g clip-path="url(#master_svg0_50_628)"><g><path d="M13.8788796875,14.086334375C13.5879796875,11.167514375,11.1921296875,8.890234375,8.2786496875,8.890234375L7.5400196875,8.890234375C4.6262296875,8.890234375,2.2300216875,11.167834375,1.9391796875,14.087334375C1.9208638875,14.139034375,1.9091796875,14.194234375,1.9091796875,14.252734375C1.9091796875,14.521834375,2.1210746875,14.740234375,2.3828636875,14.740234375C2.6446536875,14.740234375,2.8565476875,14.521834375,2.8565476875,14.252734375C2.8565476875,14.195534375,2.8451796875,14.141234375,2.8274956875,14.090234375L2.9032846875000002,14.090234375C3.2127596875,11.706034375,5.1921296875,9.865234375,7.5933896875,9.865234375L8.2249696875,9.865234375C10.6262296875,9.865234375,12.6052796875,11.706034375,12.9150796875,14.090234375L12.9908796875,14.090234375C12.9731796875,14.141234375,12.9617796875,14.195534375,12.9617796875,14.252734375C12.9617796875,14.521834375,13.1739796875,14.740234375,13.4354796875,14.740234375C13.6969796875,14.740234375,13.9091796875,14.521834375,13.9091796875,14.252734375C13.9091796875,14.193934375,13.8974796875,14.138334375,13.8788796875,14.086334375ZM7.9091796875,8.565234375C9.6532896875,8.565234375,11.0670796875,7.109884375,11.0670796875,5.315234375L11.0670796875,4.990234375C11.0670796875,3.195584375,9.6532896875,1.740234375,7.9091796875,1.740234375C6.1650696875,1.740234375,4.7512896875,3.195584375,4.7512896875,4.990234375L4.7512896875,5.315234375C4.7512896875,7.109884375,6.1650696875,8.565234375,7.9091796875,8.565234375ZM5.6986496875,4.990234375C5.6986496875,3.733784375,6.6883396875,2.715234375,7.9091796875,2.715234375C9.1297096875,2.715234375,10.1197096875,3.733784375,10.1197096875,4.990234375L10.1197096875,5.315234375C10.1197096875,6.571684375,9.1297096875,7.590234375,7.9091796875,7.590234375C6.6883396875,7.590234375,5.6986496875,6.571684375,5.6986496875,5.315234375L5.6986496875,4.990234375Z" fill="#488AFF" fill-opacity="1"/></g></g></svg>`
}, {
    name: '扫码登录电脑端',
    flag: 2,
    svg: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="master_svg0_50_632"><rect x="0" y="0" width="16" height="16" rx="0"/></clipPath></defs><g clip-path="url(#master_svg0_50_632)"><g><path d="M14.122382421875,8.337384765625L1.878039421875,8.337384765625C1.618023421875,8.337384765625,1.406982421875,8.126534765625,1.406982421875,7.866554765625C1.406982421875,7.606774765625,1.618039421875,7.395484765625,1.878039421875,7.395484765625L14.122382421875,7.395484765625C14.382882421875,7.395484765625,14.593182421875,7.606774765625,14.593182421875,7.866554765625C14.593182421875,8.126534765625,14.382882421875,8.337384765625,14.122382421875,8.337384765625ZM12.709882421875,13.988684765625L10.113562421875,13.988684765625C9.853082421875,13.988684765625,9.642242421875,13.778384765625,9.642242421875,13.517884765625C9.642242421875,13.257384765625,9.853082421875,13.046584765625,10.113562421875,13.046584765625L12.709882421875,13.046584765625C12.969882421875,13.046584765625,13.180282421875,12.835784765625,13.180282421875,12.575784765625L13.180282421875,10.221164765625C13.180282421875,9.960674765625,13.391082421875,9.750334765625,13.651582421875,9.750334765625C13.912082421875,9.750334765625,14.122382421875,9.960674765625,14.122382421875,10.221164765625L14.122382421875,12.575784765625C14.122382421875,13.354884765625,13.488482421875,13.988684765625,12.709882421875,13.988684765625ZM5.973552421875,13.988684765625L3.290762421875,13.988684765625C2.5116724218749997,13.988684765625,1.878054421875,13.354884765625,1.878054421875,12.575784765625L1.878054421875,10.221164765625C1.878054421875,9.960674765625,2.0891114218749998,9.750334765625,2.349111421875,9.750334765625C2.609122421875,9.750334765625,2.819702421875,9.960674765625,2.819702421875,10.221164765625L2.819702421875,12.575784765625C2.819702421875,12.835784765625,3.031222421875,13.046584765625,3.290762421875,13.046584765625L5.973552421875,13.046584765625C6.234032421875,13.046584765625,6.444862421875,13.257384765625,6.444862421875,13.517884765625C6.444842421875,13.778384765625,6.234012421875,13.988684765625,5.973552421875,13.988684765625ZM2.349111421875,5.982754765625C2.0891114218749998,5.982754765625,1.878054421875,5.771704765625,1.878054421875,5.5116847656250005L1.878054421875,3.1570947656249997C1.878054421875,2.3780027656250002,2.511692421875,1.744384884834,3.290762421875,1.744384884834L5.973552421875,1.744384765625C6.234032421875,1.744384765625,6.444862421875,1.955425765625,6.444862421875,2.215441765625C6.444862421875,2.474977765625,6.234032421875,2.686034765625,5.973552421875,2.686034765625L3.290762421875,2.686034765625C3.031222421875,2.686034765625,2.819702421875,2.8975547656250003,2.819702421875,3.1570947656249997L2.819702421875,5.5116847656250005C2.819702421875,5.771704765625,2.609112421875,5.982754765625,2.349111421875,5.982754765625ZM13.651582421875,5.982754765625C13.391082421875,5.982754765625,13.180282421875,5.771704765625,13.180282421875,5.5116847656250005L13.180282421875,3.1570947656249997C13.180282421875,2.8975547656250003,12.969882421875,2.686034765625,12.709882421875,2.686034765625L10.113562421875,2.686034765625C9.853082421875,2.686034765625,9.642242421875,2.474977765625,9.642242421875,2.215441765625C9.642242421875,1.955425765625,9.853082421875,1.744384765625,10.113562421875,1.744384765625L12.709882421875,1.744384765625C13.488482421875,1.744384765625,14.122382421875,2.378018765625,14.122382421875,3.1570947656249997L14.122382421875,5.5116847656250005C14.122382421875,5.771704765625,13.912082421875,5.982754765625,13.651582421875,5.982754765625Z" fill="#488AFF" fill-opacity="1"/></g></g></svg>`,
}, {
    name: '版本号',
    flag: 3,
    svg: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="16" height="16" viewBox="0 0 16 16"><defs><clipPath id="master_svg0_50_636"><rect x="0" y="0" width="16" height="16" rx="0"/></clipPath></defs><g clip-path="url(#master_svg0_50_636)"><g><path d="M14.020373828125,7.393801328125L14.017273828125,7.393801328125C13.804773828125,7.437551328125,13.651573828125,7.628171328125,13.657873828125,7.845361328125C13.659473828125,7.895361328125,13.659473828125,7.945361328125,13.659473828125,7.995361328125C13.659473828125,11.120361328125,11.126613828125,13.653161328125,8.001613828125,13.653161328125C4.876613828125,13.653161328125,2.345361828125,11.120361328125,2.345361828125,7.995361328125C2.345361828125,4.871921328125,4.878173828125,2.337549328125,8.003173828125,2.337549328125C9.584423828125,2.337549328125,11.014113828125,2.985991328125,12.040673828125,4.032861328125C12.190673828125,4.184421328125,12.425073828125,4.214111328125,12.604773828125,4.100051328125L12.607873828125,4.098491328125C12.851573828125,3.945361328125,12.890673828125,3.606301328125,12.689073828125,3.400051328125C11.496973828125,2.185986328125,9.839113828125,1.432861328125,8.003173828125,1.432861328125C4.378173828125,1.432861328125,1.440673828125,4.370361328125,1.440673828125,7.995361328125C1.440673828125,11.620361328125,4.378173828125,14.557861328125,8.003173828125,14.557861328125C11.628173828125,14.557861328125,14.565673828125,11.620361328125,14.565673828125,7.995361328125C14.565673828125,7.939111328125,14.565673828125,7.882861328125,14.564073828125,7.826611328125C14.556273828125,7.543801328125,14.296973828125,7.335991328125,14.020373828125,7.393801328125ZM13.929773828125,6.612551328125C14.192273828125,6.557861328125,14.346973828125,6.289111328125,14.267273828125,6.034421328125C14.139073828125,5.623491328125,13.970373828125,5.229741328125,13.767273828125,4.857861328125C13.642273828125,4.629741328125,13.351573828125,4.556301328125,13.131273828125,4.695361328125L13.128173828125,4.696921328125001C12.926573828125,4.823491328125,12.857873828125,5.084421328125,12.971873828125,5.293801328124999C13.146973828125,5.614111328125,13.290673828125,5.953171328125,13.401573828125,6.307861328125C13.473473828125,6.528171328125,13.701573828125,6.660991328125,13.929773828125,6.612551328125Z" fill="#488AFF" fill-opacity="1"/></g><g><path d="M8.0328125,9.770263671875L7.9734375,9.770263671875C7.7406245,9.770263671875,7.5515623,9.581203671875,7.5515623,9.348383671875L7.5515623,4.567138671875C7.5515623,4.334326671875,7.7406245,4.145263671875,7.9734375,4.145263671875L8.0328125,4.145263671875C8.2656255,4.145263671875,8.4546875,4.334326671875,8.4546875,4.567138671875L8.4546875,9.349953671875C8.4546875,9.582763671875,8.2656255,9.770263671875,8.0328125,9.770263671875ZM8.0031255,11.490573671875C7.7218755,11.490573671875,7.4921875,11.262453671875,7.4921875,10.979643671875C7.4921875,10.698393671875,7.7203125,10.468703671875,8.0031255,10.468703671875C8.2843755,10.468703671875,8.5140675,10.696823671875,8.5140675,10.979643671875C8.5140675,11.262453671875,8.2843755,11.490573671875,8.0031255,11.490573671875Z" fill="#488AFF" fill-opacity="1"/></g></g></svg>`,
}];
let html5QrCode2: any = null
let start = () => {
    Html5Qrcode.start(
        // environment 后置摄像头
        { facingMode: "environment" },
        {
            fps: 2, // 可选
            qrbox: { width: 250, height: 250 } // UI界面
        },
        ((decodedText: any, decodedResult: any) => {
            console.log('decodedText', decodedText)
            console.log('decodedResult', decodedResult)
        })
    ).catch((err: any) => {
        // 错误信息处理函数
        alert("2")
    })
}
function useCamera() {
    showToast('提示内容');
    Html5Qrcode.getCameras()
        .then((devices) => {
            if (devices && devices.length) {
                html5QrCode2 = new Html5Qrcode("reader")
                start()
            }
        })
        .catch((err: any) => {
            // handle err
            html5QrCode2 = new Html5Qrcode("reader")
            showToast(err);
            // this.$toast('您需要授予相机访问权限')
        })

}
function detailBtn(name: obj) {
    // console.log(name)
    switch (name.flag) {
        case 1:
            router.push({ path: '/userInfo' })
            break;
        case 2:
            useCamera()
            break
        case 3:
            break
        default:
            break;
    }
}
</script>
<template>
    <div class="user_content_" v-for="item in dataList" :key="item.name" @click="detailBtn(item)">
        <div class="user_content_svg">
            <span v-html="item.svg"></span>
            <span>{{ item.name }}</span>
        </div>
        <div class="svg">
            <span v-if="item.flag == 3" class="release">3.1.18</span>
            <span v-html="svg_arrows" style="vertical-align: middle;"></span>
        </div>
    </div>
    <div class="qrcode">
        <div id="reader"></div>
    </div>
</template>
<style scoped lang="scss">
.user_content_ {
    display: flex;
    justify-content: space-between;
    padding: 21px 21px 17px;
}

.user_content_svg {
    span:nth-of-type(1) {
        vertical-align: middle;
    }

    span:nth-of-type(2) {
        margin-left: 10px;
        font-size: 14px;
        color: #333333;
    }
}

.release {
    font-size: 15px;
    color: #999999;
    padding-right: 16px;
}
</style>